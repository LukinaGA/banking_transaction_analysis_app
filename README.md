# SkyBank

## Описание

Виджет для получения информации о транзакциях для страницы "Главная", разделов "Сервисы" и "Отчёты"

## Содержание

Виджет содержит:

* папку data для хранения файлов с транзакциями и полученных отчётов
* папку logs с отчётом о логировании модулей
* директорию tests с тестами к модулям
* файл .env.example с примерами API_KEY

* директорию src с 5 модулями:

1. **utils**, в котором находятся основные функции для работы виджета. Функции выполняют:
    + чтение файла с транзакциями
    + получение даты в формате datetime из строки
    + отображение приветствия в зависимости от времени суток
    + получения диапазона времени для отображения результатов
    + чтение файла с пользовательскими настройками
    + получение данных о [курсе валют](https://apilayer.com/marketplace/exchangerates_data-api) и [стоимости акций](https://site.financialmodelingprep.com/developer/docs) с помощью API.
    + фильтрация транзакций согласно полученному временному диапазону
    + получение данных по каждой карте
    + сортировка списка транзакций по размеру трат


2. **views** с функцией, формирующей информацию для страницы "Главная" с начала месяца, на который выпадает входящая
   дата, по входящую дату
3. **services** формирует информацию, полученную после простого поиска по описанию и категориям транзакций
4. **reports** формирует отчёт по транзакциям в выбранной категории за 3 месяца с переданной даты в папку data в
   XLSX-формате

В модулях 1, 3 и 4 присутствует логирование, результаты которого записываются в файл logs.log в папке logs.

Результаты модулей **views** и **services** записываются в папку data и формате JSON

Модуль **main** отвечает за основную логику проекта и связывает функциональности между собой.

Содержание программы:

1. Запрос данных о дате и времени у пользователя

```
    date = (f"{int(input("Год: "))}-{int(input("Месяц: "))}-{int(input("День: "))} "
         f"{int(input("Часы: "))}:{int(input("Минуты: "))}:{int(input("Секунды: "))}"
```

2. Выбор пользователем требуемой информации
```
Какую информацию вы хотите получить?
1. Информацию с главной страницы
2. Результаты поиска по категории и описанию
3. Отчёт трат по выбранной категории
4. Всю вышеперечисленную информацию
```
3. Формирование отчёта согласно ответу пользователя


## Тестировние

В директории tests прописаны тесты модулей из диктории src.
Также здесь есть модуль conftest.py с фикстурами для тестов. При запуске pytest все тесты завершаются успешно